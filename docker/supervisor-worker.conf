; Supervisor mengelola worker queue Laravel di lingkungan produksi
[group:laravel]
programs=laravel-queue

[program:laravel-queue]
; Nama proses dibuat unik per worker agar mudah dibaca di log
process_name=%(program_name)s_%(process_num)02d
; Menjalankan artisan queue:work dengan retry/backoff agar job lebih stabil
command=/usr/local/bin/php /var/www/laravel-todo/artisan queue:work redis --sleep=3 --tries=3 --max-time=3600 --backoff=5
autostart=true
autorestart=true
user=www-data
; Tambah worker lebih banyak dengan menambah angka ini bila diperlukan
numprocs=1
redirect_stderr=true
; Log worker ditempatkan di storage/logs agar mudah diakses aplikasi
stdout_logfile=/var/www/laravel-todo/storage/logs/queue-worker.log
stopwaitsecs=120
